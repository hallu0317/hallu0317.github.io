---
title: Network_(1)
date: 2022-11-18
categories: [Network]
tags: [network]
#pin: true
---

## 네트워크 개요

- 송신자의 메시지를 수신자에게 전달하는 과정으로 한 지점에서 원하는 다른 지점까지 의미 있는 정보를 보다 정확하고 빠르게 상대방이 이해할 수 있도록 전송하는 것
- 유선의 케이블을 컴퓨터에 연결해서 사용할 수 있고 무선으로도 사용할 수 있다. 즉 연결 형태에 따라서 유선네트워크와 무선네트워크로 분류

### 거리에 따른 네트워크 유형

| 구분 |                        개념                        |                           특성                           |
| :--: | :------------------------------------------------: | :------------------------------------------------------: |
| PAN  |               약 5m 이내의 인접지역                |  짧은 거리로 인해 보통은 유선보다는 무선의 WPAN이 활용   |
| LAN  |   동일한 지역 내의 고속 전용회선을 연결하여 구성   |    단일기관 소유 네트워크로 50m 범위 이내 한정된 지역    |
| WAN  | 광대역 내트워크망으로 서로 관련있는 LAN사이를 연결 | 두 목적지 간 최단 경로로 연결해주는 라우팅 알고리즘 중요 |

### 데이터 통신(전송)방식

- 단방향 통신(Simplex): 데이터를 전송만 할 수 있고 받을 수 없다.
- 반이중 통신(Half Duplex): 데이터를 송수신할 수 있지만 동시에 할 수 없다.
- 전이중 통신(Full Duplex): 동시에 데이터를 송수신할 수 있다.

### 다중화(Multiplexing)

- 여러 단말장치의 신호를 하나의 통신회선을 통해 송신하고 수신 츠겡서 여러 단말장치의 신호를 분리하여 입출력할 수 있는 방식

|        종류        |                                                  설명                                                  |
| :----------------: | :----------------------------------------------------------------------------------------------------: |
| 주파수 분할 다중화 |     좁은 주파수 대역을 사용하는 여러 신호를 넓은 주파수 대역을 가진 하나의 전송로를 사용해서 전송      |
|   시분할 다중화    | 전송회선의 데이터 전송 시간을 일정한 시간폭(타임슬롯)으로 나누어 일정한 크기의 데이터를 채널 별로 전송 |
|      역다중화      |    하나의 신호를 2개의 저속신호로 나누어 전송하며 하나의 채널이 고장나도 50%의 속도로 계속 사용가능    |
|  파장 분할 다중화  |              광섬유를 사용해 하나의 선로에 8개 이하의 신호를 중첩해서 전송할 수 있는 기술              |

## OSI 7 계층

- 국제표준화기구 ISO에서 개방형 시스템 간의 상호 정보전송을 위해 제정한 표준안
- 프로토콜 구성요소: 구문, 의미, 순서

### 계층별 특징

---

- 애플리케이션 계층
  - 사용자들이 사용하는 프로그램이 있는 계층
  - 최상위 계층으로 하위 계층의 구조를 몰라도 네트워크 사용 가능
  - HTTP, FTP, SNMP, SMTP 등과 같은 프로토콜이 있다.

---

- 표현 계층
  - 애플리케이션에서 전송한 메시지에 대해 정해진 코드로 변환한다.
  - 메시지를 압축하여 전송되는 데이터양을 줄이고 암호화를 수행

---

- 세션 계층
  - 송신자와 수신자 간 통신을 위해 동기화 신호를 주고받음
  - 세션연결을 하고 가상연결 제공, 데이터 통신방식 결정

---

- 전송 계층(Segment)
  - 송신자와 수신자 간 논리적 연결 수행, 종단 간(End to End)연결 관리
  - 전송 계층 프로토콜로 TCP/UDP가 있음
  - 에러를 탐지하고 재전송하는 방법으로 에러 수정

---

- 네트워크 계층(Packet)
  - 수신자의 IP주소를 읽어 라우터가 경로를 결정
  - 라우팅 알고리즘을 사용해 경로를 결정하고 경로가 결정되면 포워딩 수행
  - IPV4/IPV6 주소가 있고 네트워크의 에러확인을 위해 ICMP 프로토콜 사용

---

- 데이터링크 계층(Frame)
  - 네트워크 계층에서 붙인 IP헤더에서 IP주소를 읽어 MAC주소를 구함
  - 네트워크에 부하가 발생하지 않도록 흐름제어

---

- 물리 계층(bit)
  - 물리적 선로를 전송하기 위해 비트로 데이터 전송, 거리가 멀면 리피터를 사용해 신호 증폭

## TCP/IP 4계층

### 계층별 특징

- 애플리케이션 계층
  - 사용자들이 사용하는 프로그램이 있는 계층으로 FTP, Telnet, SSH, HTTP, SMPT, SNMP 등
- 전송 계층
  - 신뢰성있게 메시지를 전송하는 TCP 프로토콜이 있음
  - 비연결형으로 빠르게 메시지를 전송하는 UDP 프로토콜이 있음
- 인터넷 계층
  - IP주소를 읽어 경로를 결정하는 라우팅 실행, 논리적 주소인 IP 주소를 부여하고 최단 경로 결정
  - IP 주소를 하드웨어 주소인 MAC 주소로 변환하는 ARP 프로토콜 지원
  - 네트워크의 에러를 검사하는 ICMP 프로토콜 지원
- 네트워크 엑세스 계층
  - 물리적 케이블 혹은 무선 통신과 연결하고 메시지 전송
  - 전기적 신호로 변환해서 메시지 전송

### 애플리케이션 계층 관련 서비스

|  역할  |                                        내용                                        |
| :----: | :--------------------------------------------------------------------------------: |
|  FTP   |                          사용자의 파일을 업로드/다운로드                           |
|  DNS   |  DNS Query를 사용해서 DNS서버에 URL을 전송하고 해당 URL에 매핑되는 IP주소를 제공   |
|  HTTP  | 웹 브라우저와 웹 서버 사이에서 웹 페이지의 Request 및 Response를 수행하는 프로토콜 |
| Telnet | 특정 지역의 사용자가 지역적으로 다른 곳에 위치한 컴퓨터를 온라인으로 연결하여 사용 |
|  SMTP  |  인터넷 전자우편을 위한 프로토콜로 암호화 및 인증 기능없이 사용자의 이메일을 전송  |
|  SNMP  |    네트워크에 대한 트래픽, 세션 등의 네트워크의 상태를 모니터링하고 정보를 전달    |

## TCP

**TCP:** 네트워크 계층 상위에서 수행되는 전송 계층의 프로토콜로 클라이언트와 서버 간의 연결지향, 신뢰성있는 데이터전송, 흐름제어 등의 기능을 수행하는 프로토콜로 메시지를 송수신하기 전에 연결지향으로 먼저 연걸을 확인하고 연결이 확립되면 메시지를 송수신하는 방식

### TCP의 주요 기능

- 신뢰성있는 전송: 수신자는 데이터를 송신받고 ACK Number를 송신자에게 전송한다. 송신자가 ACK Number가 수신되지 않으면 재전송을 실행하여 신뢰성 있는 데이터 송수신을 수행한다.
- 순서 제어: 송신자의 메시지 순서를 맞추기 위해 송신자는 메시지 전송 시에 Sequence Number를 같이 보낸다. 그러면 수신자는 메시지의 순서가 맞지 않아도 Sequnce Number로 정렬을 수행
- 완전 이중(Full Duplex): 송신자는 송신, 수신자는 수신을 동시에 할 수 있음
- 흐름 제어: 수신자가 메시지를 제대로 받지 못하면, 송신자는 전송 속도를 늦춰 네트워크 효율성 제어
- 혼잡 제어: 수신자의 메모리 버퍼정보(Window Size)를 송신자가 수신받아 수신자의 버퍼 상태를 보고 전송 속도를 조절

### TCP Header 구조

|           항목            |                내용                 |
| :-----------------------: | :---------------------------------: |
|        Source Port        |      가상 선로의 송신 측 포트       |
|     Destination Port      |      가상 선로의 수신 측 포트       |
|      Sequence Number      | 송신자가 전송하는 데이터의 일련번호 |
| Piggyback Acknowledgement |    수신자가 응답받은 데이터의 수    |

TCP 헤더길이, ACK, SYN, FIN, Checksum 등...

## UDP

**UDP :** 데이터를 빠르게 전송할 용도로 사용하며, TCP에 비해 기능은 없지만 데이터를 빠르게 송수신 할 수 있다. 하지만 재전송 기능이 없어서 네트워크에서 패킷이 손실 될 수 있는 비연결성, 비신뢰성 프로토콜

**UDP Header 구조** : Source Port, Destination Port, length, checksum, application data(message)

## IP

**IP :** IP 프로토콜은 IP 주소 형태로 송신자와 수신자의 IP 주소를 가지고 있고 IP 주소를 읽어 최적의 경로를 결정할 수 있게 해주며 종류로는 IPV4, IPV6가 있다.

### IP Header 구조

|      항목       |                               내용                               |
| :-------------: | :--------------------------------------------------------------: |
|     Version     |                           IPV4 / IPV6                            |
|  Header length  |                         헤더의 전체 길이                         |
| Type of Service |                           서비스 유형                            |
|  Flag & Offset  | IP Datagram 단편화(한 번에 통과할 수 있는 패킷의 최대 크기) 정보 |
|  Time to live   |              Datagram이 통과할 수 있는 라우터의 수               |
|    Protocol     |                          ICMP, TCP, UDP                          |

Total length, Header checksum 등...

### 라우팅

- Internetwork를 통해 데이터를 근원지에서 목적지로 전달하는 기능으로 경로 결정에서 최단 경로 선정 및 전송을 수행하는 포워딩을 한다.

### 라우팅 프로토콜의 종류

- **Distance Vector**
  - 최단 경로를 구하는 밸만 포드 알고리즘 기반
  - 네트워크 변화 발생 시 해당 정보를 인접한 라우터에 정기적으로 전달 하고, 인접 라우터에서는 라우팅 테이블에 정보 갱신
  - 모든 라우터까지의 거리 정보 보관
  - 일정주기(이웃 라우터와 공유)마다 정보 전송
  - RIP, IGRP, EIGRP 등...
- **Link State**
  - 최소 신장트리를 구하는 다익스트라 알고리즘 기반
  - 라우터와 라우터를 연결하는 link 상태에 따라 최적경로 설정
  - 라우터가 네트워크 변화 감지 시 링크 상태 변경 정보를 인접한 라우터에게 즉각 전달, 저장
  - 인접 라우터까지의 Link Cost 계산
  - 변화 발생 시에만 정보 전송
  - **OSPF**, IS-IS 등...

### 데이터 전송 방식

- **Unicast :** 1 : 1 전송 방식
- **Broadcast :** 1 : N 전송 방식 (동일한 서브넷 상의 모든 수신자에게 전송)
- **Multicast :** M : N 전송 방식 (하나 이상의 송신자들이 특정 그룹의 수신자에게 전송)
  ** IPV6에는 Anycast(그룹에 등록된 노드 중 최단 경로 노드 한개에만 전송) 추가, Broadcast 삭제 **

### NAT(Network Address Translation)

- 사설 IP를 라우팅이 될 수 있는 공인 IP로 변경하는 주소 변환

|     종류     |                                          특징                                          |
| :----------: | :------------------------------------------------------------------------------------: |
|  Normal NAT  |                         N개의 사설 IP를 한 개의 공인IP로 변환                          |
| Reverse NAT  |    Normal NAT로 설정된 외부 IP로 요청하여 N개의 사설 IP의 어떤 것에 매핑할 수 없음     |
| Redirect NAT |                    목적지 주소를 재 지정할 경우 사용(장애 시 사용)                     |
| Exclude NAT  |          특정 목적지로 접속 할 경우 설정된 NAT를 적용 받지 않도록 할 때 사용           |
| Dynamic NAT  | 내부의 사설 IP가 라우터 혹은 NAT 소프트웨어에 의해 미리 정해진 공인 IP로 랜덤하게 매핑 |

### ARP / RARP

- **ARP :** IP 주소를 물리적인 하드웨어 주소인 MAC 주소로 변경하는 프로토콜
- **RARP :** 물리적인 하드웨어 주소인 MAC주소를 기반으로 논리적 주소 IP주소를 알아오는 프로토콜
